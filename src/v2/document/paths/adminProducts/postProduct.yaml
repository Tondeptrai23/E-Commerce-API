# POST /products
tags:
  - Admin Products
summary: Create a new product
description: Creates a new product with the given data.
security:
  - bearerAuth: []
requestBody:
  required: true
  content:
    application/json:
      schema:
        type: object
        properties:
          name: 
            type: string
            example: "T-Shirt"
          description:
            type: string
          variants:
            type: array
            items:
              type: object
              properties:
                price:
                  type: number
                  example: 100
                discountPrice:
                  type: number
                  example: 90
                  nullable: true
                stock:
                  type: integer
                  example: 10
                sku:
                  type: string
                
              allOf:
                - $ref: "../../schemas/products/variantForAdmin.yaml"

          categories:
            $ref: "../../schemas/products/categoryNames.yaml"
responses:
    201:
      description: Product created
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: string
                example: "true"
              product:
                type: object
                properties:
                  variants:
                    type: array
                    items:
                      allOf:
                        - $ref: "../../schemas/products/variantForAdmin.yaml"
                        - $ref: "../../schemas/products/variantAttribute.yaml"
                        - $ref: "../../schemas/timestamps.yaml"
                  images:
                    type: array
                    items:
                      type: object
                      allOf:
                        - $ref: "../../schemas/products/image.yaml"
                        - $ref: "../../schemas/timestamps.yaml"
                  categories:
                    $ref: "../../schemas/products/categoryNames.yaml"
                allOf:
                  - $ref: "../../schemas/products/product.yaml"
                  - $ref: "../../schemas/timestamps.yaml"
                
    400:
      description: Validation Error
      content:
        application/json:
          schema:
            $ref: "../../schemas/error/error400.yaml"
    
    401:
      description: Token error, not authenticated
      content:
        application/json:
          schema:
            $ref: "../../schemas/error/error401.yaml"

    403:
      description: Not an admin
      content:
        application/json:
          schema:
            $ref: "../../schemas/error/error403.yaml"

    500:
      description: Server error
      content:
        application/json:
          schema:
            $ref: "../../schemas/error/error500.yaml"